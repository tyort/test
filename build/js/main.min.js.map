{"version":3,"sources":["source/js/main.js","source/js/formulas.js"],"names":["document","querySelector","pageDesire","photoGallery","addEventListener","evt","preventDefault","target","value","method","url","itemData","fetch","JSON","stringify","headers","Content-Type","then","response","ok","json","error","e","Error","data","sendRequest","stringOfPhotos","createPhotos","galleryImages","container","element","place","prepend","after","append","renderComponent","template","newElement","createElement","innerHTML","classList","add","turnOnListener","catch","err","console","log","photos","map","item","width","height","join","photolist","children","forEach","photo","index","count","toggle","style","position","contains","dataset"],"mappings":"yBAAaA,SAASC,cAAc,QAApC,MACMC,EAAaF,SAASC,cAAc,gBACpCE,EAAeH,SAASC,cAAc,kBCF/BC,EAAeD,cAAe,QAG3CG,iBAAgB,SAAeC,IAC/BA,EAAAC,iBACmBD,EAAAE,OAAAN,cAAA,iBAAAO,OAiCZ,SAAqBC,EAAQC,EAAKC,EAAW,MAKlD,OAAOC,MAAMF,EAAK,CAChBD,OAAQA,EACRE,SAAUE,KAAKC,UAAUH,GACzBI,QAPc,CACdC,eAAgB,sBAQfC,KAAKC,GACAA,EAASC,GACJD,EAASE,OAGXF,EAASE,OACbH,KAAKI,IACJ,MAAMC,EAAI,IAAIC,MAAM,uBAEpB,MADAD,EAAEE,KAAOH,EACHC,MAlDhBG,CAAY,MAAA,+EACZR,KAAIO,IACJ,MAAME,EAAiBC,EAASH,EAAAI,eATD,EAACC,EAAWC,EAASC,KAClD,OAAQA,GACN,IAAK,aACHF,EAAUG,QAAQF,GAClB,MACF,IAAK,WACHD,EAAUI,MAAMH,GAChB,MACF,QACED,EAAUK,OAAOJ,KACpBK,CAAAhC,EAG0B,CAACiC,IAC5B,MAAMC,EAAarC,SAASsC,cAAc,OAE1C,OADAD,EAAWE,UAAYH,EAChBC,GANNC,CAAAZ,GAAA,cACDvB,EAAAF,cAAA,OAAAuC,UAAAC,IAAA,wBACFC,MAEEC,MAAMC,GAAAC,QAAaC,IAAAF,MDMrB,MCHEjB,EAAAoB,GAoBFA,EACOC,IAAAC,GACL,yBAECA,EAAAvC,+BACHuC,EAAAC,kCACoBD,EAAAE,wCAKpBC,KAAK,IAGLV,EAAO,KACP,MACMW,EAAO,IADblD,EAAAF,cAAA,yBAC4BqD,UAC5BD,EAASE,QAAK,CAAKC,EAAIC,KACvBD,EAAApD,iBAAwB,QAAM,KAE9BiD,EAAUE,QAAO,CAAAN,EAAAS,KACPD,IAAAC,IACJT,EAAAT,UAAAmB,OAAA,YAAA,GACNV,EAAAW,MAAAV,MAAA,ODfUD,EAAKW,MAAMT,OAAS,QA7CxBF,EAAOW,MAAAC,SAAS,YAItBL,EAAAhB,UAAAmB,OAAA,YAGMH,EAAAhB,UAAiBsB,SAAA,aACrBN,EAAMI,MAAUV,MAAOM,EAAOO,QAAAb,MAAP,KACzBM,EAAAI,MAAAT,OAAAK,EAAAO,QAAAZ,OAAA,KACEK,EAAAI,MAAYC,SAAQ,UAEhBL,EAAMI,MAAAV,MAAc,OACpBM,EAAAI,MAAAT,OAAgB,QAChBK,EAAAI,MAAYC,SAAC","file":"main.min.js","sourcesContent":["const body = document.querySelector(`body`);\nconst pageDesire = document.querySelector(`.page-desire`);\nconst photoGallery = document.querySelector(`.photo-gallery`)\nconst form = pageDesire.querySelector(`form`);\nimport {sendRequest, renderComponent, createElement} from './formulas';\n\nform.addEventListener(`submit`, (evt) => {\n  evt.preventDefault();\n  const requestURL = evt.target.querySelector(`#desire-phone`).value\n\n  sendRequest('GET', `https://don16obqbay2c.cloudfront.net/frontend-test-task/gallery-images.json`)\n    .then(data => {\n      const stringOfPhotos = createPhotos(data.galleryImages);\n      renderComponent(photoGallery, createElement(stringOfPhotos), `afterBegin`);\n      photoGallery.querySelector(`div`).classList.add(`photo-gallery__inner`);\n      turnOnListener();\n    })\n    .catch(err => console.log(err))\n});\n\nconst createPhotos = (photos) => {\n  return photos\n    .map((item) => {\n      return (\n        `<img \n          src=\"${item.url}\"\n          data-width=\"${item.width}\"\n          data-height=\"${item.height}\"\n          alt=\"\"\n        >`\n      );\n    })\n    .join(``);\n};\n\nconst turnOnListener = () => {\n  const sdasd = photoGallery.querySelector(`.photo-gallery__inner`);\n  const photolist = [...sdasd.children];\n  photolist.forEach((photo, index) => {\n    photo.addEventListener(`click`, () => {\n\n      photolist.forEach((item, count) => {\n        if (index !== count) {\n          item.classList.toggle(`big-size`, false);\n          item.style.width = `auto`;\n          item.style.height = `150px`;\n          item.style.position = `static`;\n        }\n      })\n\n      photo.classList.toggle(`big-size`);\n\n      if (photo.classList.contains(`big-size`)) {\n        photo.style.width = `${photo.dataset.width}px`;\n        photo.style.height = `${photo.dataset.height}px`;\n        photo.style.position = `fixed`;\n      } else {\n        photo.style.width = `auto`;\n        photo.style.height = `150px`;\n        photo.style.position = `static`;\n      }\n    })\n  })\n}\n\n\n\n\n\n","export const renderComponent = (container, element, place) => {\n  switch (place) {\n    case `afterBegin`:\n      container.prepend(element);\n      break;\n    case `afterEnd`:\n      container.after(element);\n      break;\n    default:\n      container.append(element);\n  }\n};\n\nexport const createElement = (template) => {\n  const newElement = document.createElement(`div`);\n  newElement.innerHTML = template;\n  return newElement;\n};\n\nexport const onEscKeyDown = (evt) => {\n  if (evt.key === `Escape` || evt.key === `Esc`) {\n    hideElement();\n  }\n};\n\nexport const hideElement = () => {\n  const requestPopup = document.querySelector(`.page-request-popup`);\n  const successPopup = document.querySelector(`.page-success-popup`);\n\n  successPopup.classList.toggle(`visually-hidden`, true);\n  requestPopup.classList.toggle(`visually-hidden`, true);\n  document.removeEventListener(`keydown`, onEscKeyDown);\n  document.querySelector(`body`).style.overflow = `visible`;\n};\n\nexport const phoneSample = /^((8|\\+7)[\\- ]?)?(\\(?\\d{3}\\)?[\\- ]?)?[\\d\\- ]{7,10}$/;\nexport const nameSample = /^[a-zA-Zа-яёА-ЯЁ]+$/u;\n\nexport function sendRequest(method, url, itemData = null) {\n  const headers = {\n    'Content-Type': 'application/json'\n  }\n\n  return fetch(url, {\n    method: method,\n    itemData: JSON.stringify(itemData),\n    headers: headers\n  })\n    .then(response => {\n      if (response.ok) {\n        return response.json()\n      }\n\n      return response.json()\n        .then(error => {\n          const e = new Error('Что-то пошло не так')\n          e.data = error\n          throw e\n        })\n    })\n}\n"]}
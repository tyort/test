!function(){"use strict";const e=(e,t,n)=>{switch(n){case"afterBegin":e.prepend(t);break;case"afterEnd":e.after(t);break;default:e.append(t)}},t=e=>{const t=document.createElement("div");return t.innerHTML=e,t};const n=document.querySelector("body"),r=document.querySelector(".page-link"),o=document.querySelector(".photo-gallery"),a=["dragenter","dragover","dragleave","drop"];r.querySelector("form").addEventListener("submit",n=>{n.preventDefault();(function(e,t,n=null){return fetch(t,{method:e,itemData:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(e=>e.ok?e.json():e.json().then(e=>{const t=new Error("Что-то пошло не так");throw t.data=e,t}))})("GET",n.target.querySelector("#link-address").value).then(n=>{const r=c(n.galleryImages);e(o,t(r),"afterBegin"),o.querySelector("div").classList.add("photo-gallery__inner"),i()}).catch(e=>console.log(e))}),n.addEventListener("drop",e=>{if(document.querySelector(".photo-gallery__inner")){[...e.dataTransfer.files].forEach(e=>s(e))}});const i=()=>{[...o.querySelector(".photo-gallery__inner").children].forEach(r=>{const o=r.querySelector("img");o.addEventListener("click",()=>{let r=t(l(o.outerHTML)).firstChild;e(n,r,"afterBegin"),r=document.querySelector(".photo-container"),r.querySelector("img").style.width=o.dataset.width+"px",r.querySelector("img").style.height=o.dataset.height+"px",r.addEventListener("click",e=>d(e))})})},c=e=>e.map((e,t)=>`<div class="placeholder">\n          <img \n            src="${e.url}"\n            data-width="${e.width}"\n            data-height="${e.height}"\n            data-count="${t}"\n            alt="">\n        </div>`).join(""),l=e=>`<div class="photo-container">\n      ${e}\n      <button class="button-wide">Удалить фото</button>\n    </div>`,d=e=>{const t=document.querySelector(".photo-container");if("button-wide"===e.target.className){const t=e.target.parentElement.querySelector("img").dataset.count;[...document.querySelector(".photo-gallery__inner").children].find(e=>e.querySelector("img").dataset.count===t).remove()}t.removeEventListener("click",d),t.remove()};a.forEach(e=>{n.addEventListener(e,e=>{e.preventDefault(),e.stopPropagation()})});const s=r=>{const o=new FileReader;o.readAsDataURL(r),o.onloadend=function(){const r=new Image;r.src=o.result,r.onload=function(){const o=document.querySelector(".photo-gallery__inner").lastChild.querySelector("img"),a=Number(o.dataset.count)+1;let i=u(this.width,this.height,r.src,a);e(document.querySelector(".photo-gallery__inner"),t(i).firstChild),i=document.querySelector(".photo-gallery__inner").lastChild.querySelector("img"),i.addEventListener("click",()=>{let r=t(l(i.outerHTML)).firstChild;e(n,r,"afterBegin"),r=document.querySelector(".photo-container"),r.querySelector("img").style.width=i.dataset.width+"px",r.querySelector("img").style.height=i.dataset.height+"px",r.addEventListener("click",e=>d(e))})}}},u=(e,t,n,r)=>`<div class="placeholder">\n      <img \n        src="${n}"\n        data-width="${e}"\n        data-height="${t}"\n        data-count="${r}"\n        alt="">\n    </div>`}();
//# sourceMappingURL=main.min.js.map

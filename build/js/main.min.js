!function(){"use strict";const e=(e,t,r)=>{switch(r){case"afterBegin":e.prepend(t);break;case"afterEnd":e.after(t);break;default:e.append(t)}},t=e=>{const t=document.createElement("div");return t.innerHTML=e,t};const r=document.querySelector("body"),n=document.querySelector(".page-link"),o=document.querySelector(".photo-gallery"),a=["dragenter","dragover","dragleave","drop"];n.querySelector("form").addEventListener("submit",r=>{r.preventDefault();(function(e,t,r=null){return fetch(t,{method:e,itemData:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then(e=>e.ok?e.json():e.json().then(e=>{const t=new Error("Что-то пошло не так");throw t.data=e,t}))})("GET",r.target.querySelector("#link-address").value).then(r=>{const a=i(r.galleryImages);e(o,t(a),"afterBegin"),o.querySelector("div").classList.add("photo-gallery__inner"),c(),n.querySelector("form").reset()}).catch(e=>console.log(e))}),r.addEventListener("drop",e=>{if(document.querySelector(".photo-gallery__inner")){[...e.dataTransfer.files].forEach(e=>s(e))}});const c=()=>{[...o.querySelector(".photo-gallery__inner").children].forEach(n=>{const o=n.querySelector("img");o.addEventListener("click",()=>{let n=t(l(o.outerHTML)).firstChild;e(r,n,"afterBegin"),n=document.querySelector(".photo-container"),n.querySelector("img").style.width=o.dataset.width+"px",n.querySelector("img").style.height=o.dataset.height+"px",n.addEventListener("click",e=>d(e))})})},i=e=>e.map((e,t)=>`<div class="placeholder">\n          <img \n            src="${e.url}"\n            data-width="${e.width}"\n            data-height="${e.height}"\n            data-count="${t}"\n            alt="">\n        </div>`).join(""),l=e=>`<div class="photo-container">\n      ${e}\n      <button class="button-wide">Удалить фото</button>\n    </div>`,d=e=>{const t=document.querySelector(".photo-container");if("button-wide"===e.target.className){const t=e.target.parentElement.querySelector("img").dataset.count;[...document.querySelector(".photo-gallery__inner").children].find(e=>e.querySelector("img").dataset.count===t).remove()}t.removeEventListener("click",d),t.remove()};a.forEach(e=>{r.addEventListener(e,e=>{e.preventDefault(),e.stopPropagation()})});const s=n=>{const o=new FileReader;o.readAsDataURL(n),o.onloadend=function(){const n=new Image;n.src=o.result,n.onload=function(){const o=document.querySelector(".photo-gallery__inner").lastChild.querySelector("img"),a=Number(o.dataset.count)+1;let c=u(this.width,this.height,n.src,a);e(document.querySelector(".photo-gallery__inner"),t(c).firstChild),c=document.querySelector(".photo-gallery__inner").lastChild.querySelector("img"),c.addEventListener("click",()=>{let n=t(l(c.outerHTML)).firstChild;e(r,n,"afterBegin"),n=document.querySelector(".photo-container"),n.querySelector("img").style.width=c.dataset.width+"px",n.querySelector("img").style.height=c.dataset.height+"px",n.addEventListener("click",e=>d(e))})}}},u=(e,t,r,n)=>`<div class="placeholder">\n      <img \n        src="${r}"\n        data-width="${e}"\n        data-height="${t}"\n        data-count="${n}"\n        alt="">\n    </div>`}();
//# sourceMappingURL=main.min.js.map
